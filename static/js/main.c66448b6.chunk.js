(this["webpackJsonpnews-explorer-frontend"]=this["webpackJsonpnews-explorer-frontend"]||[]).push([[0],Array(29).concat([function(e,t,n){},function(e,t,n){},function(e,t,n){},,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),s=n(1),c=n.n(s),r=n(21),o=n.n(r),i=(n(29),n(11)),l=n(14),u=n(10),d=n(3),p=n(2),h=n(8),j=(n(30),n(31),n.p+"static/media/logout.f67f251a.svg"),_=n.p+"static/media/logoutBlack.bde199c2.svg",b=c.a.createContext();var m=function(e){var t=e.activePage,n=e.setMainActive,s=e.setSavedNewsActive,r=e.logged,o=e.burgerOpened,i=e.openPopupLogin,l=e.handleLogout,u=c.a.useContext(b);return Object(a.jsxs)("nav",{className:"main"===t?o?"nav nav_opened":"nav":o?"nav nav_opened nav_whiteStrip":"nav",children:[Object(a.jsx)(h.b,{className:"main"===t?"nav__link nav__link_active nav__link_active_white":"nav__link nav__link_color_black",to:"/",onClick:n,children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"}),r&&Object(a.jsx)(h.b,{className:"main"===t?"nav__link nav__link_color_gray":"nav__link nav__link_color_black nav__link_active nav__link_active_black",to:"/saved-news",onClick:s,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u043d\u044b\u0435 \u0441\u0442\u0430\u0442\u044c\u0438"}),r?Object(a.jsxs)("button",{className:"main"===t?"nav__logout":"nav__logout nav__logout_color_black",type:"button",onClick:l,children:[u.name,Object(a.jsx)("img",{className:"nav__logoutIcon",src:"main"===t?j:_,alt:"Logout Icon"})]}):Object(a.jsx)("button",{className:"nav__auth",type:"button",onClick:i,children:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]})};var g=function(e){var t=e.burgerOpened,n=e.toggleBurger,s=e.activePage,c=e.setMainActive,r=e.setSavedNewsActive,o=e.handleLogout,i=e.logged,l=e.openPopupLogin,u=e.currentUser;return Object(a.jsxs)("header",{className:"main"===s?t?"header header_darkStrip":"header":"header header_whiteStrip",children:[Object(a.jsx)(h.b,{className:"main"===s?"header__logo":"header__logo header__logo_color_black",to:"/",onClick:c,children:"NewsExplorer"}),Object(a.jsx)("button",{className:"main"===s?t?"header__burgerMenu header__burgerMenu_opened_white":"header__burgerMenu":t?"header__burgerMenu header__burgerMenu_opened_black header__burgerMenu_color_black":"header__burgerMenu header__burgerMenu_color_black",type:"button",onClick:n}),Object(a.jsx)(m,{activePage:s,setMainActive:c,setSavedNewsActive:r,logged:i,burgerOpened:t,openPopupLogin:l,handleLogout:o,currentUser:u})]})};n(37),n(38);var v=function(e){return Object(a.jsxs)("section",{className:"searchForm page__searchForm",children:[Object(a.jsxs)("div",{className:"searchForm__container",children:[Object(a.jsx)("h1",{className:"searchForm__title",children:"\u0427\u0442\u043e \u0442\u0432\u043e\u0440\u0438\u0442\u0441\u044f \u0432 \u043c\u0438\u0440\u0435?"}),Object(a.jsx)("p",{className:"searchForm__paragraph",children:"\u041d\u0430\u0445\u043e\u0434\u0438\u0442\u0435 \u0441\u0430\u043c\u044b\u0435 \u0441\u0432\u0435\u0436\u0438\u0435 \u0441\u0442\u0430\u0442\u044c\u0438 \u043d\u0430 \u043b\u044e\u0431\u0443\u044e \u0442\u0435\u043c\u0443 \u0438 \u0441\u043e\u0445\u0440\u0430\u043d\u044f\u0439\u0442\u0435 \u0432 \u0441\u0432\u043e\u0451\u043c \u043b\u0438\u0447\u043d\u043e\u043c \u043a\u0430\u0431\u0438\u043d\u0435\u0442\u0435."})]}),Object(a.jsxs)("form",{className:"searchForm__field",onSubmit:function(t){t.preventDefault(),e.onSearch()},noValidate:!0,children:[Object(a.jsx)("input",{type:"text",className:"searchForm__input",name:"search",required:!0,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043c\u0443 \u043d\u043e\u0432\u043e\u0441\u0442\u0438",value:e.value,onChange:e.onChange}),Object(a.jsx)("button",{className:"searchForm__button",type:"submit",children:"\u0418\u0441\u043a\u0430\u0442\u044c"})]})]})};n(39);var O=function(){return Object(a.jsxs)("section",{className:"preloader",children:[Object(a.jsx)("i",{className:"preloader__rotary"}),Object(a.jsx)("p",{className:"preloader__text",children:"\u0418\u0434\u0435\u0442 \u043f\u043e\u0438\u0441\u043a \u043d\u043e\u0432\u043e\u0441\u0442\u0435\u0439..."})]})};n(40);function f(e){var t;switch(e.slice(5,7)){case"01":t=" \u044f\u043d\u0432\u0430\u0440\u044f, ";break;case"02":t=" \u0444\u0435\u0432\u0440\u0430\u043b\u044f, ";break;case"03":t=" \u043c\u0430\u0440\u0442\u0430, ";break;case"04":t=" \u0430\u043f\u0440\u0435\u043b\u044f, ";break;case"05":t=" \u043c\u0430\u044f, ";break;case"06":case"07":t=" \u0438\u044e\u043d\u044f, ";break;case"08":t=" \u0430\u0432\u0433\u0443\u0441\u0442\u0430, ";break;case"09":t=" \u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044f, ";break;case"10":t=" \u043e\u043a\u0442\u044f\u0431\u0440\u044f, ";break;case"11":t=" \u043d\u043e\u044f\u0431\u0440\u044f, ";break;case"12":t=" \u0434\u0435\u043a\u0430\u0431\u0440\u044f, ";break;default:t=""}return+e.slice(8,10)+t+e.slice(0,4)}var x=function(e){var t=e.card,n=e.logged,s=e.activePage,c=e.onSaveBtnClick,r=e.onDeleteBtnClick;return Object(a.jsxs)("div",{className:"newsCard",children:[Object(a.jsxs)("a",{className:"newsCard__link",href:"main"===s?t.url:t.link,target:"_blank",rel:"noopener noreferrer",children:[Object(a.jsx)("img",{className:"newsCard__image",src:"main"===s?t.urlToImage:t.image,alt:t.title}),Object(a.jsxs)("div",{className:"newsCard__container",children:[Object(a.jsx)("p",{className:"newsCard__date",children:f("main"===s?t.publishedAt:t.date)}),Object(a.jsxs)("div",{className:"newsCard__textbox",children:[Object(a.jsx)("p",{className:"newsCard__title",children:t.title}),Object(a.jsx)("p",{className:"newsCard__description",children:"main"===s?t.description:t.text})]}),Object(a.jsx)("p",{className:"newsCard__source",children:"main"===s?t.source.name:t.source})]})]}),"main"===s?Object(a.jsx)("button",{className:n?t.isSaved?"newsCard__save newsCard__save_saved":"newsCard__save":"newsCard__save newsCard__save_nologged",type:"button",onClick:function(){c(t)}}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("button",{className:"newsCard__delete",type:"button",onClick:function(){r(t)}}),Object(a.jsx)("p",{className:"newsCard__keyword",children:t.keyword})]})]})},N=(n(41),n.p+"static/media/notFoundIcon.b9740c3b.svg");var S=function(e){var t=e.activePage,n=e.logged,s=e.savedNews,c=e.searchResultsShow,r=e.onSaveBtnClick,o=e.searchResultsHidden,i=e.handleShowMore,l=e.searchQueryFail,u=e.onDeleteBtnClick;return Object(a.jsx)(a.Fragment,{children:"main"===t?c?Object(a.jsx)("section",{className:"newsCardList",children:c.length>0?Object(a.jsxs)("div",{className:"newsCardList__container",children:[Object(a.jsx)("p",{className:"newsCardList__title",children:"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b \u043f\u043e\u0438\u0441\u043a\u0430"}),Object(a.jsx)("div",{className:"newsCardList__cards",children:c.map((function(e,s){return Object(a.jsx)(x,{card:e,logged:n,activePage:t,onSaveBtnClick:r},s)}))}),o.length>0&&Object(a.jsx)("button",{type:"button",className:"newsCardList__showmore",onClick:i,children:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0435\u0449\u0435"})]}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("img",{src:N,alt:"\u041d\u0435\u0442 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432",className:"newsCardList__noCards"}),Object(a.jsx)("p",{className:"newsCardList__noTitle",children:"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"}),Object(a.jsx)("p",{className:"newsCardList__noText",children:"\u041a \u0441\u043e\u0436\u0430\u043b\u0435\u043d\u0438\u044e \u043f\u043e \u0432\u0430\u0448\u0435\u043c\u0443 \u0437\u0430\u043f\u0440\u043e\u0441\u0443 \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"})]})}):l&&Object(a.jsx)("p",{className:"newsCardList__error",children:"\u0412\u043e \u0432\u0440\u0435\u043c\u044f \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430. \u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e, \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0430 \u0441 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435\u043c \u0438\u043b\u0438 \u0441\u0435\u0440\u0432\u0435\u0440 \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d. \u041f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435 \u043d\u0435\u043c\u043d\u043e\u0433\u043e \u0438 \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437."}):Object(a.jsx)("section",{className:"newsCardList",children:Object(a.jsx)("div",{className:"newsCardList__container",children:Object(a.jsx)("div",{className:"newsCardList__cards",children:s.map((function(e,n){return Object(a.jsx)(x,{card:e,activePage:t,onDeleteBtnClick:u},n)}))})})})})},w=(n(42),n.p+"static/media/avatar.20b5c6c3.jpg");var k=function(){return Object(a.jsxs)("section",{className:"about",children:[Object(a.jsx)("img",{src:w,alt:"Avatar",className:"about__ava"}),Object(a.jsxs)("div",{className:"about__container",children:[Object(a.jsx)("p",{className:"about__title",children:"\u041e\u0431 \u0430\u0432\u0442\u043e\u0440\u0435"}),Object(a.jsx)("p",{className:"about__intro",children:"\u042d\u0442\u043e \u0431\u043b\u043e\u043a \u0441 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435\u043c \u0430\u0432\u0442\u043e\u0440\u0430 \u043f\u0440\u043e\u0435\u043a\u0442\u0430. \u0417\u0434\u0435\u0441\u044c \u0441\u043b\u0435\u0434\u0443\u0435\u0442 \u0443\u043a\u0430\u0437\u0430\u0442\u044c, \u043a\u0430\u043a \u0432\u0430\u0441 \u0437\u043e\u0432\u0443\u0442, \u0447\u0435\u043c \u0432\u044b \u0437\u0430\u043d\u0438\u043c\u0430\u0435\u0442\u0435\u0441\u044c, \u043a\u0430\u043a\u0438\u043c\u0438 \u0442\u0435\u0445\u043d\u043e\u043b\u043e\u0433\u0438\u044f\u043c\u0438 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u0432\u043b\u0430\u0434\u0435\u0435\u0442\u0435."}),Object(a.jsx)("p",{className:"about__intro",children:"\u0422\u0430\u043a\u0436\u0435 \u043c\u043e\u0436\u043d\u043e \u0440\u0430\u0441\u0441\u043a\u0430\u0437\u0430\u0442\u044c \u043e \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0435 \u043e\u0431\u0443\u0447\u0435\u043d\u0438\u044f \u0432 \u041f\u0440\u0430\u043a\u0442\u0438\u043a\u0443\u043c\u0435, \u0447\u0435\u043c\u0443 \u0432\u044b \u0442\u0443\u0442 \u043d\u0430\u0443\u0447\u0438\u043b\u0438\u0441\u044c, \u0438 \u0447\u0435\u043c \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u043e\u043c\u043e\u0447\u044c \u043f\u043e\u0442\u0435\u043d\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u043c \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430\u043c."})]})]})};var y=function(e){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(v,{searchQuery:e.searchQuery,searchQueryError:e.searchQueryError,onChange:e.handleSearchChange,onSearch:e.onSearch}),e.loading&&Object(a.jsx)(O,{}),Object(a.jsx)(S,{logged:e.logged,searchResultsShow:e.searchResultsShow,searchResultsHidden:e.searchResultsHidden,handleShowMore:e.handleShowMore,onSaveBtnClick:e.onSaveBtnClick,searchQueryFail:e.searchQueryFail,activePage:e.activePage}),Object(a.jsx)(k,{})]})};n(43),n(44);function C(e){var t="\u0441\u043e\u0445\u0440\u0430\u043d\u0451\u043d\u043d\u044b\u0445 \u0441\u0442\u0430\u0442\u0435\u0439";return e.toString().endsWith("1")&&!e.toString().endsWith("11")?t="\u0441\u043e\u0445\u0440\u0430\u043d\u0451\u043d\u043d\u0430\u044f \u0441\u0442\u0430\u0442\u044c\u044f":(e.toString().endsWith("2")&&!e.toString().endsWith("12")||e.toString().endsWith("3")&&!e.toString().endsWith("13")||e.toString().endsWith("4")&&!e.toString().endsWith("14"))&&(t="\u0441\u043e\u0445\u0440\u0430\u043d\u0451\u043d\u043d\u044b\u0435 \u0441\u0442\u0430\u0442\u044c\u0438"),t}function L(e){var t="-\u0438 \u0434\u0440\u0443\u0433\u0438\u043c";return e.toString().endsWith("1")&&!e.toString().endsWith("11")?t="-\u043c\u0443 \u0434\u0440\u0443\u0433\u043e\u043c\u0443":(e.toString().endsWith("2")&&!e.toString().endsWith("12")||e.toString().endsWith("3")&&!e.toString().endsWith("13")||e.toString().endsWith("4")&&!e.toString().endsWith("14"))&&(t="-\u043c \u0434\u0440\u0443\u0433\u0438\u043c"),t}var I=function(e){var t=e.savedNews,n=e.sortKeywords,s=c.a.useContext(b);return Object(a.jsxs)("section",{className:"savedNewsHeader",children:[Object(a.jsx)("p",{className:"savedNewsHeader__title",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u043d\u044b\u0435 \u0441\u0442\u0430\u0442\u044c\u0438"}),Object(a.jsxs)("p",{className:"savedNewsHeader__articles",children:[s.name,", \u0443 \u0432\u0430\u0441 ",t.length," ",C(t.length)]}),n.length<=3?Object(a.jsxs)("p",{className:"savedNewsHeader__keywords",children:["\u041f\u043e \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u043c \u0441\u043b\u043e\u0432\u0430\u043c:",n.map((function(e,t){return t<n.length-1?Object(a.jsxs)("span",{className:"savedNewsHeader__keyword",children:[" ",e,","]},t):Object(a.jsxs)("span",{className:"savedNewsHeader__keyword",children:[" ",e]},t)}))]}):Object(a.jsxs)("p",{className:"savedNewsHeader__keywords",children:["\u041f\u043e \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u043c \u0441\u043b\u043e\u0432\u0430\u043c:",n.map((function(e,t){return 0===t?Object(a.jsxs)("span",{className:"savedNewsHeader__keyword",children:[" ",e,","]},"idx"):1===t?Object(a.jsxs)("span",{className:"savedNewsHeader__keyword",children:[" ",e," "]},"idx"):void 0})),"\u0438 ",n.length-2,L(n.length-2)]})]})};var A=function(e){var t=e.setSavedNewsActive,n=e.savedNews,s=e.getArticles,r=e.sortKeywords,o=e.onDeleteBtnClick;return c.a.useEffect((function(){t()})),c.a.useEffect((function(){s()}),[]),Object(a.jsx)(a.Fragment,{children:n.length>0?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(I,{savedNews:n,sortKeywords:r}),Object(a.jsx)(S,{savedNews:n,onDeleteBtnClick:o})]}):Object(a.jsx)("p",{children:"\u041f\u043e\u043a\u0430 \u043d\u0435\u0442 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u043d\u044b\u0445 \u0441\u0442\u0430\u0442\u0435\u0439"})})},E=(n(45),n(46),n.p+"static/media/github.c2993f78.svg"),P=n.p+"static/media/fb.fe55b6ce.svg";var T=function(e){var t=e.setMainActive;return Object(a.jsxs)("footer",{className:"footer",children:[Object(a.jsx)("p",{className:"footer__copy",children:"\xa9 2020 Supersite, Powered by News API"}),Object(a.jsxs)("ul",{className:"footer__container",children:[Object(a.jsxs)("div",{className:"footer__links",children:[Object(a.jsx)("li",{className:"footer__li",children:Object(a.jsx)(h.b,{className:"footer__link",to:"/",onClick:t,children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"})}),Object(a.jsx)("li",{className:"footer__li",children:Object(a.jsx)("a",{href:"https://praktikum.yandex.ru",className:"footer__link",target:"_blank",rel:"noopener noreferrer",children:"\u042f\u043d\u0434\u0435\u043a\u0441.\u041f\u0440\u0430\u043a\u0442\u0438\u043a\u0443\u043c"})})]}),Object(a.jsx)("li",{className:"footer__ico",children:Object(a.jsx)("a",{href:"https://github.com/rashidovD",className:"footer__icoLink",target:"_blank",rel:"noopener noreferrer",children:Object(a.jsx)("img",{src:E,alt:"Icon Github",className:"footer__icoImg"})})}),Object(a.jsx)("li",{className:"footer__ico",children:Object(a.jsx)("a",{href:"https://www.facebook.com/dzh.rashidow",className:"footer__icoLink",target:"_blank",rel:"noopener noreferrer",children:Object(a.jsx)("img",{src:P,alt:"Icon FaceBook",className:"footer__icoImg"})})})]})]})};n(47);var F=function(e){var t=e.isOpen,n=e.name,s=e.title,c=e.submitBtnText,r=e.textLink,o=e.changePopup,i=e.onClose,l=e.children,u=e.isValid;return Object(a.jsx)("div",{className:t?"popup popup_type_".concat(n," popup_opened"):"popup popup_type_".concat(n),children:Object(a.jsxs)("form",{className:"popup__form",name:n,children:[Object(a.jsx)("h2",{className:"popup__title",children:s}),l,Object(a.jsx)("button",{className:u?"popup__savebtn":"popup__savebtn popup__savebtn_disabled",type:"submit",children:c}),Object(a.jsxs)("p",{className:"popup__linkText",children:["\u0438\u043b\u0438 ",Object(a.jsx)("span",{className:"popup__link",onClick:o,children:r})]}),Object(a.jsx)("button",{className:"popup__closebtn",type:"button",onClick:i})]})})};n(48);var R=function(e){return Object(a.jsxs)(F,{name:"login",title:"\u0412\u0445\u043e\u0434",isOpen:e.popupLoginOpen,onClose:e.onClose,onSubmit:function(t){t.preventDefault(),e.onLogin(e.values.email,e.values.password)},submitBtnText:"\u0412\u043e\u0439\u0442\u0438",textLink:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f",changePopup:e.changePopup,isValid:e.isValid,children:[Object(a.jsx)("p",{className:"popup__inputTitle",children:"Email"}),Object(a.jsx)("input",{type:"email",name:"email",className:"popup__input",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u043e\u0447\u0442\u0443",value:e.values.email||"",onChange:e.handleChange,required:!0,pattern:"[a-zA-Z]+@[a-zA-Z]+\\.[a-zA-Z]+"}),Object(a.jsx)("span",{className:e.errors.email?"popup__input-error popup__input-error_visible":"popup__input-error",children:e.errors.email}),Object(a.jsx)("p",{className:"popup__inputTitle",children:"\u041f\u0430\u0440\u043e\u043b\u044c"}),Object(a.jsx)("input",{type:"password",className:"popup__input",name:"password",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",required:!0,value:e.values.password||"",onChange:e.handleChange}),Object(a.jsx)("span",{className:e.errors.password?"popup__input-error popup__input-error_visible":"popup__input-error",children:e.errors.password}),Object(a.jsx)("span",{className:"popup__submit-error",children:e.submitError})]})};n(49);var B=function(e){return Object(a.jsxs)(F,{name:"register",title:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",isOpen:e.popupRegisterOpen,onClose:e.onClose,onSubmit:function(t){t.preventDefault(),e.onRegister(e.values.email,e.values.password,e.values.name)},submitBtnText:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f",textLink:"\u0412\u043e\u0439\u0442\u0438",changePopup:e.changePopup,isValid:e.isValid,children:[Object(a.jsx)("p",{className:"popup__inputTitle",children:"Email"}),Object(a.jsx)("input",{name:"email",type:"email",className:"popup__input",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u043e\u0447\u0442\u0443",value:e.values.email||"",onChange:e.handleChange,required:!0,pattern:"[a-zA-Z]+@[a-zA-Z]+\\.[a-zA-Z]+"}),Object(a.jsx)("span",{className:e.errors.email?"popup__input-error popup__input-error_visible":"popup__input-error",children:e.errors.email}),Object(a.jsx)("p",{className:"popup__inputTitle",children:"\u041f\u0430\u0440\u043e\u043b\u044c"}),Object(a.jsx)("input",{name:"password",type:"password",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",value:e.values.password||"",onChange:e.handleChange,className:"popup__input",required:!0}),Object(a.jsx)("span",{className:e.errors.password?"popup__input-error popup__input-error_visible":"popup__input-error",children:e.errors.password}),Object(a.jsx)("p",{className:"popup__inputTitle",children:"\u0418\u043c\u044f"}),Object(a.jsx)("input",{className:"popup__input",name:"name",minLength:"2",maxLength:"30",type:"text",required:!0,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0432\u043e\u0435 \u0438\u043c\u044f",value:e.values.name||"",onChange:e.handleChange}),Object(a.jsx)("span",{className:e.errors.name?"popup__input-error popup__input-error_visible":"popup__input-error",children:e.errors.name}),Object(a.jsx)("span",{className:"popup__submit-error",children:e.submitError})]})};n(50);var M=function(e){return Object(a.jsx)("div",{className:e.isOpen?"popup popup_type_success popup_opened":"popup popup_type_success",children:Object(a.jsxs)("div",{className:"popup__container",children:[Object(a.jsx)("h2",{className:"popup__message",children:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d!"}),Object(a.jsx)("span",{className:"popup__link popup__link_signIn",onClick:e.onLinkClick,children:"\u0412\u043e\u0439\u0442\u0438"}),Object(a.jsx)("button",{className:"popup__closebtn",type:"button",onClick:e.onClose,"aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c \u043e\u043a\u043d\u043e."})]})})},D=n(23),H=function(e){var t=e.component,n=Object(D.a)(e,["component"]);return c.a.useEffect((function(){n.logged||localStorage.getItem("logged")||n.openPopupLogin()})),Object(a.jsx)(p.b,{children:n.logged||localStorage.getItem("logged")?Object(a.jsx)(t,Object(u.a)({},n)):Object(a.jsx)(p.a,{to:"/"})})},W="https://rashidov.students.nomoreparties.co",J="\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430. \u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u0437\u0430\u043f\u0440\u043e\u0441 \u043f\u043e\u0437\u0434\u043d\u0435\u0435";function q(e){return fetch(W+"/articles/"+e,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"}).then((function(e){return e.json()})).then((function(e){return e.data?e:400===e.statusCode&&e.validation?e.validation.body:e.message?e:void 0})).catch((function(e){return{message:J}}))}var Q=function(){var e=Object(p.g)(),t=c.a.useState("main"),n=Object(d.a)(t,2),s=n[0],r=n[1],o=c.a.useState(!1),h=Object(d.a)(o,2),j=h[0],_=h[1],m=c.a.useState([]),v=Object(d.a)(m,2),O=v[0],f=v[1],x=c.a.useState(null),N=Object(d.a)(x,2),S=N[0],w=N[1],k=c.a.useState([]),C=Object(d.a)(k,2),L=C[0],I=C[1],E=c.a.useState([]),P=Object(d.a)(E,2),F=P[0],D=P[1],Q=c.a.useState([]),V=Object(d.a)(Q,2),z=V[0],Z=V[1],K=c.a.useState(""),G=Object(d.a)(K,2),U=G[0],Y=G[1],X=c.a.useState(""),$=Object(d.a)(X,2),ee=$[0],te=$[1],ne=c.a.useState(!1),ae=Object(d.a)(ne,2),se=ae[0],ce=ae[1],re=c.a.useState(""),oe=Object(d.a)(re,2),ie=oe[0],le=oe[1],ue=c.a.useState(!1),de=Object(d.a)(ue,2),pe=de[0],he=de[1],je=c.a.useState(!1),_e=Object(d.a)(je,2),be=_e[0],me=_e[1],ge=c.a.useRef();ge.current=be;var ve=c.a.useState(!1),Oe=Object(d.a)(ve,2),fe=Oe[0],xe=Oe[1],Ne=c.a.useRef();Ne.current=fe;var Se=c.a.useState(!1),we=Object(d.a)(Se,2),ke=we[0],ye=we[1],Ce=c.a.useState({}),Le=Object(d.a)(Ce,2),Ie=Le[0],Ae=Le[1],Ee=c.a.useState({}),Pe=Object(d.a)(Ee,2),Te=Pe[0],Fe=Pe[1],Re=c.a.useState(!1),Be=Object(d.a)(Re,2),Me=Be[0],De=Be[1],He=c.a.useState(""),We=Object(d.a)(He,2),Je=We[0],qe=We[1];function Qe(e){var t=e.target.name,n=e.target.value;Ae(Object(u.a)(Object(u.a)({},Ie),{},Object(l.a)({},t,n))),Fe(Object(u.a)(Object(u.a)({},Te),{},Object(l.a)({},t,e.target.validationMessage))),De(e.target.closest("form").checkValidity())}function Ve(){Ae({}),Fe({}),De(!1),qe("")}function ze(){r("main")}function Ze(){r("saved-news")}var Ke=c.a.useCallback((function(e){"Escape"===e.key&&(ge.current?Ye():Ne.current?$e():et())}),[]),Ge=c.a.useCallback((function(e){e.target===e.currentTarget&&(ge.current?Ye():Ne.current?$e():et())}),[]);function Ue(){document.addEventListener("keydown",Ke),document.querySelector(".popup_type_login").addEventListener("click",Ge),me(!0)}function Ye(){me(!1),document.querySelector(".popup_type_login").removeEventListener("click",Ge),document.removeEventListener("keydown",Ke),Ve()}function Xe(){document.addEventListener("keydown",Ke),document.querySelector(".popup_type_register").addEventListener("click",Ge),xe(!0)}function $e(){xe(!1),document.querySelector(".popup_type_register").removeEventListener("click",Ge),document.removeEventListener("keydown",Ke),Ve()}function et(){ye(!1),document.removeEventListener("keydown",Ke),document.querySelector(".popup_type_success").removeEventListener("click",Ge)}function tt(){be?(Ye(),Xe()):fe?($e(),Ue()):(et(),be())}function nt(){fetch(W+"/articles",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"}).then((function(e){return e.json()})).then((function(e){return e.data?e:400===e.statusCode&&e.validation?e.validation.body:e.message?e:void 0})).catch((function(e){return{message:J}})).then((function(e){if(e.data){var t=e.data.map((function(e){return e.keyword})).reduce((function(e,t){return e[t]=(e[t]||0)+1,e}),{}),n=Object.keys(t).sort((function(e,n){return t[n]-t[e]}));f(e.data),D(n)}else"\u0421\u0442\u0430\u0442\u044c\u0438 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u044b"===e.message&&(f([]),D([]))})).catch((function(e){return console.log(e)}))}return c.a.useEffect((function(){var e=localStorage.getItem("logged"),t=JSON.parse(localStorage.getItem("searchResultsShow")),n=JSON.parse(localStorage.getItem("searchResultsHidden"))||[],a=localStorage.getItem("searchQuery")||"";w(t),I(n),Y(a),fetch(W+"/users/me",{method:"GET",credentials:"include"}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return{message:J}})).then((function(t){t.data&&"true"===e?(Z(t.data),_(!0)):"true"===e&&localStorage.removeItem("logged")})).catch((function(e){return console.log(e)}))}),[]),Object(a.jsx)("div",{className:"page",children:Object(a.jsxs)(b.Provider,{value:z,children:[Object(a.jsx)(g,{logged:j,toggleBurger:function(){he(!pe)},burgerOpened:pe,activePage:s,setMainActive:ze,setSavedNewsActive:Ze,handleLogout:function(){localStorage.removeItem("logged"),ze(),_(!1),e.push("/")},openPopupLogin:Ue,currentUser:z}),Object(a.jsxs)(p.d,{children:[Object(a.jsx)(p.b,{exact:!0,path:"/",children:Object(a.jsx)(y,{logged:j,activePage:s,searchResultsShow:S,searchResultsHidden:L,handleShowMore:function(){localStorage.setItem("searchResultsShow",JSON.stringify([].concat(Object(i.a)(S),Object(i.a)(L.slice(0,3))))),w([].concat(Object(i.a)(S),Object(i.a)(L.slice(0,3)))),localStorage.setItem("searchResultsHidden",JSON.stringify(L.slice(3))),I(L.slice(3))},onSaveBtnClick:function(e){var t,n,a,s,c,r,o;j?e.isSaved?q(e._id).then((function(t){if(t.data){var n=Object(i.a)(S),a=n.findIndex((function(t){return t.title===e.title&&t.description===e.description&&t.publishedAt===e.publishedAt&&t.source.name===e.source.name&&t.url===e.url&&t.urlToImage===e.urlToImage}));n[a].isSaved=!1,delete n[a]._id,localStorage.setItem("searchResultsShow",JSON.stringify(n)),w(n)}})).catch((function(e){return console.log(e)})):(t=U,n=e.title,a=e.description,s=e.publishedAt,c=e.source.name,r=e.url,o=e.urlToImage,fetch(W+"/articles",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include",body:JSON.stringify({keyword:t,title:n,text:a,date:s,source:c,link:r,image:o})}).then((function(e){return e.json()})).then((function(e){return e.data?e:400===e.statusCode&&e.validation?e.validation.body:e.message?e:void 0})).catch((function(e){return{message:J}}))).then((function(t){if(t.data){var n=Object(i.a)(S),a=n.findIndex((function(t){return t.title===e.title&&t.description===e.description&&t.publishedAt===e.publishedAt&&t.source.name===e.source.name&&t.url===e.url&&t.urlToImage===e.urlToImage}));n[a].isSaved=!0,n[a]._id=t.data._id,localStorage.setItem("searchResultsShow",JSON.stringify(n)),w(n)}})).catch((function(e){return console.log(e)})):Xe()},searchQuery:U,searchQueryError:ee,handleSearchChange:function(e){e.target.value.trim()?te(""):te("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043b\u044e\u0447\u0435\u0432\u043e\u0435 \u0441\u043b\u043e\u0432\u043e"),Y(e.target.value)},onSearch:function(){U.trim()?(le(!0),ce(!1),function(e){var t=new Date,n=t.getFullYear()+-+(t.getMonth()+1).toString().padStart(2,0)+"-"+t.getDate().toString().padStart(2,"0");t.setDate(t.getDate()-7);var a=t.getFullYear()+"-"+(t.getMonth()+1).toString().padStart(2,"0"),s="https://nomoreparties.co/news/v2/everything?"+"q=".concat(e,"&")+"apiKey=".concat("ad5a635f4b314a09a1c2656f0d84d65c","&")+"from=".concat(a,"&")+"to=".concat(n,"&")+"sortBy=publishedAt&pageSize=100";return fetch(s,{method:"GET"}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return e}))}(U).then((function(e){"ok"===e.status?(e.articles=e.articles.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{isSaved:!1})})),e.articles.length>0?(localStorage.setItem("searchResultsShow",JSON.stringify(e.articles.slice(0,3))),localStorage.setItem("searchQuery",U)):(localStorage.removeItem("searchResultsShow"),localStorage.removeItem("searchQuery")),w(e.articles.slice(0,3)),localStorage.setItem("searchResultsHidden",JSON.stringify(e.articles.slice(3))),I(e.articles.slice(3)),le(!1)):(ce(!0),le(!1))})).catch((function(e){console.log(e),le(!1)}))):te("\u0412\u0432\u0435\u0434\u0438 \u043a\u043b\u044e\u0447\u0435\u0432\u043e\u0435 \u0441\u043b\u043e\u0432\u043e")},searchQueryFail:se,loading:ie})}),Object(a.jsx)(H,{path:"/saved-news",logged:j,setSavedNewsActive:Ze,onDeleteBtnClick:function(e){q(e._id).then((function(t){if(t.data){var n=Object(i.a)(S),a=n.findIndex((function(t){return t._id===e._id}));a>=0&&(n[a].isSaved=!1,delete n[a]._id,localStorage.setItem("searchResultsShow",JSON.stringify(n)),w(n)),nt()}})).catch((function(e){return console.log(e)}))},savedNews:O,getArticles:nt,sortKeywords:F,openPopupLogin:Ue,component:A}),Object(a.jsx)(p.b,{children:Object(a.jsx)(p.a,{to:"/"})})]}),Object(a.jsx)(T,{setMainActive:ze}),Object(a.jsx)(R,{popupLoginOpen:be,onClose:Ye,changePopup:tt,onLogin:function(e,t){(function(e,t){return fetch(W+"/signin",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:e,password:t})}).then((function(e){return e.json()})).then((function(e){return e.data?e:400===e.statusCode&&e.validation?e.validation.body:e.message?e:void 0})).catch((function(e){return{message:J}}))})(e,t).then((function(e){e.data?(localStorage.setItem("logged","true"),Z(e.data),_(!0),Ye()):qe(e.message)})).catch((function(e){return console.log(e)}))},submitError:Je,values:Ie,errors:Te,isValid:Me,handleChange:Qe}),Object(a.jsx)(B,{popupRegisterOpen:fe,onClose:$e,changePopup:tt,onRegister:function(e,t,n){(function(e,t,n){return fetch(W+"/signup",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:e,password:t,name:n})}).then((function(e){return e.json()})).then((function(e){return e.data?e:400===e.statusCode&&e.validation?e.validation.body:e.message?e:void 0})).catch((function(e){return{message:J}}))})(e,t,n).then((function(e){e.data?($e(),document.addEventListener("keydown",Ke),document.querySelector(".popup_type_success").addEventListener("click",Ge),ye(!0)):qe(e.message)})).catch((function(e){return console.log(e)}))},submitError:Je,values:Ie,errors:Te,isValid:Me,handleChange:Qe}),Object(a.jsx)(M,{isOpen:ke,changePopup:tt,onClose:et})]})})},V=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,52)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),a(e),s(e),c(e),r(e)}))};o.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(h.a,{children:Object(a.jsx)(Q,{})})}),document.getElementById("root")),V()}]),[[51,1,2]]]);
//# sourceMappingURL=main.c66448b6.chunk.js.map